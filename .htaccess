ErrorDocument 404 /error_page.php
ErrorDocument 403 /error_page.php

Options -Indexes

# Настройка кэширования статических файлов
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 year"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
</IfModule>

# Запретить доступ к конкретным файлам
<FilesMatch "^(\.htaccess|\.gitattributes)$">
    Order Allow,Deny
    Deny from all
</FilesMatch>

RewriteEngine On
RewriteBase /

# Запрет запросов с PATH_INFO
# RewriteCond %{REQUEST_URI} ^(.+\.php)/.*$
# RewriteRule .* - [R=404,L]

# Если URL содержит .php и после него идёт что-то ещё
RewriteCond %{REQUEST_URI} ^(.+\.php)/.*$
RewriteRule ^(.+\.php)/.*$ /$1 [R=301,L]

# Удаляем конечный слеш для не-директорий
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} (.+)/$
RewriteRule ^ %1 [L,R=301]

# Убираем .php из URL (например, uslugi.php → uslugi)
RewriteCond %{THE_REQUEST} \s/+(.+?)\.php[\s?] [NC]
RewriteRule ^ /%1 [R=301,L,NE]
